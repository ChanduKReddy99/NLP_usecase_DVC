schema: '2.0'
stages:
  prepare_data:
    cmd: python src/stage01_prepare.py --config=configs/config.yaml --params=params.yaml
    deps:
    - path: configs/config.yaml
      md5: cfe770e32d8c1caab89cfab619ac8a2a
      size: 432
    - path: data/data.xml
      md5: 13b5540218f13aafefb9656d6213930f
      size: 37914798
    - path: params.yaml
      md5: 6798fb339813c2dd58376218c1a1a57c
      size: 144
    - path: src/stage01_prepare.py
      md5: 0b1374746bd33cc9ccb965524dff8505
      size: 2538
    - path: src/utils/common_utils.py
      md5: 45103e7717030675615da8ee3972a89e
      size: 994
    - path: src/utils/data_management.py
      md5: b078ca6074264d24d61f78c0fcef82e6
      size: 924
    params:
      params.yaml:
        prepare.seed: 42
        prepare.split: 0.25
    outs:
    - path: artifacts/prepared_data/test.tsv
      md5: d954c27b4c723aa7d366421a443bd692
      size: 5986870
    - path: artifacts/prepared_data/train.tsv
      md5: f1da2251fb6c0021fb9c916a09b256c3
      size: 17899449
  featurize:
    cmd: python src/stage02_featurization.py --config=configs/config.yaml --params=params.yaml
    deps:
    - path: artifacts/prepared_data/test.tsv
      md5: d954c27b4c723aa7d366421a443bd692
      size: 5986870
    - path: artifacts/prepared_data/train.tsv
      md5: f1da2251fb6c0021fb9c916a09b256c3
      size: 17899449
    - path: configs/config.yaml
      md5: cfe770e32d8c1caab89cfab619ac8a2a
      size: 432
    - path: src/stage02_featurization.py
      md5: 3f0878ccc5dfcf352d6998615f097155
      size: 3223
    - path: src/utils/common_utils.py
      md5: 45103e7717030675615da8ee3972a89e
      size: 994
    - path: src/utils/featurize.py
      md5: 9fe574714545d0f4169f6c1815849415
      size: 482
    params:
      params.yaml:
        featurize.max_features: 2500
        featurize.ngrams: 2
    outs:
    - path: artifacts/features/test.pkl
      md5: cc643d96eaa1114e3b73eb9df1551dba
      size: 3072661
    - path: artifacts/features/train.pkl
      md5: 74fc1e176a04403573eb0e45fcc8567b
      size: 9201241
  train:
    cmd: python src/stage03_train.py --config=configs/config.yaml --params=params.yaml
    deps:
    - path: artifacts/features/train.pkl
      md5: 74fc1e176a04403573eb0e45fcc8567b
      size: 9201241
    - path: configs/config.yaml
      md5: cfe770e32d8c1caab89cfab619ac8a2a
      size: 432
    - path: src/stage03_train.py
      md5: b751e8a127efeeb39ab5f2612c5009b1
      size: 2474
    - path: src/utils/common_utils.py
      md5: 45103e7717030675615da8ee3972a89e
      size: 994
    params:
      params.yaml:
        train.min_split: 16
        train.n_est: 100
        train.seed: 42
    outs:
    - path: artifacts/model/model.pkl
      md5: bea08373e52c57a634738907e0928ab6
      size: 3279958
  run_plots_command:
    cmd: dvc plots diff
  test:
    cmd: python src/stage04_test.py --config=configs/config.yaml
    deps:
    - path: artifacts/features/test.pkl
      md5: cc643d96eaa1114e3b73eb9df1551dba
      size: 3072661
    - path: artifacts/model/model.pkl
      md5: bea08373e52c57a634738907e0928ab6
      size: 3279958
    - path: configs/config.yaml
      md5: cfe770e32d8c1caab89cfab619ac8a2a
      size: 432
    - path: src/stage04_test.py
      md5: 1f6fb6ce0b175b36e535cb9883a8f53b
      size: 2942
    - path: src/utils/common_utils.py
      md5: 45103e7717030675615da8ee3972a89e
      size: 994
    outs:
    - path: prc.json
      md5: 74d8058e6f76f6710f72fed31be0f893
      size: 123921
    - path: roc.json
      md5: e0be11fc92e703d97520fdd483c5ee5a
      size: 113392
    - path: scores.json
      md5: b1ab27918810dabcf6c00413a98aebdc
      size: 80
